<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>GraphicsLayer - functional test</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no">

  <link rel="stylesheet" href="../../../../esri/css/main.css">

  <script>
    var dojoConfig = {
      async: true,
      isDebug: true,

      paths: {
        esri: "../esri"
      }
    };
  </script>

  <style>
    html, body {
      padding: 0;
      margin: 0;
    }
  </style>


  <script type="text/javascript" src="../../../../dojo/dojo.js"></script>
  <script>
    var map, view, graphicsLayer;
    var pointGraphic, polylineGraphic, polygonGraphic;

    require([
        "esri/Map",
        "esri/views/MapView",
        "esri/layers/GraphicsLayer",

        "esri/Graphic",
        "esri/geometry/Point",
        "esri/geometry/Polyline",
        "esri/geometry/Polygon",

        "esri/symbols/SimpleMarkerSymbol",
        "esri/symbols/SimpleLineSymbol",
        "esri/symbols/SimpleFillSymbol",

        "dojo/domReady!"
      ],
      function(
        Map, MapView, GraphicsLayer,
        Graphic, Point, Polyline, Polygon,
        SimpleMarkerSymbol, SimpleLineSymbol, SimpleFillSymbol
      ) {

        map = new Map({
          basemap: "hybrid"
        });

        view = new MapView({
          center: [-80, 35],
          container: "viewDiv",
          map: map,
          zoom: 3
        });


        /*********************
         * Add graphics layer
         *********************/

        map.then(function(result){
          graphicsLayer = new GraphicsLayer();
          map.add(graphicsLayer);

          /**********************
           * Add a point graphic
           **********************/

          // Titanic
          var point = new Point(-49.97, 41.73);

          var markerSymbol = new SimpleMarkerSymbol({
            color: [226, 119, 40],

            outline: new SimpleLineSymbol({
              color: [255, 255, 255],
              width: 2
            })
          });

          pointGraphic = new Graphic({
            geometry: point,
            symbol:   markerSymbol
          });

          graphicsLayer.add(pointGraphic);

          /*************************
           * Add a polyline graphic
           *************************/

          // Keystone pipeline
          var polyline = new Polyline([
            [-111.30, 52.68],
            [-98, 49.5],
            [-93.94, 29.89]
          ]);

          var lineSymbol = new SimpleLineSymbol({
            color: [226, 119, 40],
            width: 4
          });

          polylineGraphic = new Graphic({
            geometry: polyline,
            symbol:   lineSymbol
          });

          graphicsLayer.add(polylineGraphic);

          /************************
           * Add a polygon graphic
           ************************/

          // Bermuda Triangle
          var polygon = new Polygon([
            [-64.78, 32.3],
            [-80.21, 25.78],
            [-66.07, 18.45],
            [-64.78, 32.3]
          ]);
          var fillSymbol = new SimpleFillSymbol({
            color: [227, 139, 79, 0.8],

            outline: new SimpleLineSymbol({
              color: [255, 255, 255],
              width: 1
            })
          });

          polygonGraphic = new Graphic({
            geometry: polygon,
            symbol:   fillSymbol
          });

          graphicsLayer.add(polygonGraphic);

        });

      });
  </script>
</head>

<body>
<div id="viewDiv"></div>
</body>

</html>
