<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>Test HTML file for functional testing</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no">

  <link rel="stylesheet" href="../../../../esri/css/main.css">

  <script>
    var dojoConfig = {
      async: true,
      isDebug: true,

      paths: {
        esri: "../esri"
      }
    };
  </script>

  <style>
    html, body, #mapDiv{
      padding: 0;
      margin: 0;
      height: 100%;
    }
  </style>


  <script type="text/javascript" src="../../../../dojo/dojo.js"></script>

  <script>
    var executeRequest;

    require([
      "esri/request",
      "esri/config",

      "dojo/dom",
      "dojo/dom-construct",

      "esri/identity/IdentityManager",

      "dojo/domReady!"
    ], function(
      esriRequest, esriConfig,
      dom, domConstruct
    ) {
      esriConfig.request.corsEnabledServers.push('sampleserver6.arcgisonline.com');

      var req = {
        //url: "./mock/json.json"
        url: "http://sampleserver6.arcgisonline.com/arcgis/rest/services/SaveTheBay/FeatureServer/0?f=pjson"
      };

      executeRequest = esriRequest(req);
      executeRequest.then(function(response) {
        console.log(response);
        var node = domConstruct.toDom("<div id='text'></div>");
        domConstruct.place(node, "title", "after");
        node.innerHTML = JSON.stringify(response);
      });

    });
  </script>
</head>
<body>
<h1 id="title">Simple Identity Manager</h1>
</body>
</html>
