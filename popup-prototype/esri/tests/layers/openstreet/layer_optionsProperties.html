<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Layer properties</title>
        <link rel="stylesheet" type="text/css" href="../../../../dojo/dijit/themes/tundra/tundra.css">
        <script>
            dojoConfig = {
                isDebug: true
            };
        </script>
        <script type="text/javascript" src="../../../../../index.jsp">
        </script>
        <script type="text/javascript">
            dojo.require("esri.layers.osm");
            dojo.require("doh.runner");
            
            
            function init(){
                var layer = new esri.layers.OpenStreetMapLayer({
                    id: "myOSMLayer",
                    visible: true,
                    opacity: 0.75,
                    displayLevels: [0, 1, 2]
                });
                
                if (layer.loaded) {
                    runTests(layer);
                }
                else {
                    dojo.connect(layer, "onLoad", runTests);
                }
            }
            
            function runTests(layer){
                doh.registerGroup("layers.openstreet.layer_optionsProperties", [{
                    name: "type",
                    timeout: 50,
                    runTest: function(t){
                        t.assertTrue(layer instanceof esri.layers.OpenStreetMapLayer);
                    }
                }, {
                    name: "loaded",
                    timeout: 50,
                    runTest: function(t){
                        t.assertEqual("boolean", typeof layer.loaded);
                        t.assertTrue(layer.loaded);
                    }
                }, {
                    name: "id",
                    timeout: 50,
                    runTest: function(t){
                        t.assertTrue(layer.id === "myOSMLayer");
                    }
                }, {
                    name: "opacity",
                    timeout: 50,
                    runTest: function(t){
                        t.assertEqual("number", typeof layer.opacity);
                        t.assertEqual(0.75, layer.opacity);
                    }
                }, {
                    name: "visible",
                    timeout: 50,
                    runTest: function(t){
                        t.assertEqual("boolean", typeof layer.visible);
                        t.assertTrue(layer.visible);
                    }
                }]);
                doh.run();
            }
            
            dojo.addOnLoad(init);
        </script>
    </head>
    <body class="tundra">
    </body>
</html>
