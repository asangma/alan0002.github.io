<!DOCTYPE html>
<html>
<head>
  <title>MdSlider Test</title>
  <style>
    html, body, #map
    {
      height: 100%;
      width: 100%;
      margin: 0;
      padding: 0;
    }

    #mdSlider
    {
      position: absolute;
      bottom: 10px;
      left: 0px;
      right: 0px;
      height: 80px;
      width: 80%;
      margin-left: auto;
      margin-right: auto;
      border: 1px solid #AFAFAF;
      background-color: #EEEEEE;
    }
  </style>
  <link rel="stylesheet" type="text/css" href="../../../dijit/themes/claro/claro.css">
  <link rel="stylesheet" type="text/css" href="../../css/main.css">
  <script type="text/javascript">
    var dojoConfig = {
      parseOnLoad: true,
      isDebug: true,
      async: true,
      packages: [
          {
            name: "esri",
            location: "../esri"
          }
      ]
    };
  </script>
  <script type="text/javascript" src="../../../dojo/dojo.js"></script>
  <script type="text/javascript">
    require(["dojo/parser",
    "..//MultidimensionalSlider",
    "esri/map",
    "esri/layers/ArcGISImageServiceLayer",
    "dojo/dnd/Moveable",
    "dojo/domReady!"],
    function (parser, MdSlider, Map, ImageServiceLayer, Moveable) {
      var map = new Map("map", {
        basemap: "streets"
      });

     function getParameterByName (name) {
                  name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
                  var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                          results = regex.exec(location.search);
                  return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
                }
                
                var isUrl = getParameterByName("isUrl");
                isUrl = isUrl ? isUrl : "//eg1149.uae.esri.com:6080/arcgis/rest/services/mdtest/ImageServer";
                var dim = getParameterByName("dim");
                dim = dim ? dim : "StdZ";
                
                var isLayer = new ImageServiceLayer(isUrl, {
								activeMapDimensions: [dim]});
                map.addLayer(isLayer);

                var slider = new MdSlider({
                  map: map,
                  dimension: dim,
                  layout: MdSlider.LAYOUT_HORIZONTAL,
                  thumbCount: 2
                }, "mdSlider");

                slider.startup();

                var moveableSlider = new Moveable(document.getElementById("mdSlider"));

    });
  </script>
</head>
<body class="claro">
  <div id="map"></div>
  <div style="" id="mdSlider" ></div>
</body>
</html>
