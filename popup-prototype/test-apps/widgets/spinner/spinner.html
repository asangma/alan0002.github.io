<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Map</title>

    <link rel="stylesheet" href="../../../dijit/themes/claro/claro.css">
  <link rel="stylesheet" href="../../../esri/css/main.css">
    <script src="../../../dojo/dojo.js"></script>

  <script>
    var map, view, spinner, spinTimer;

    require([
      "esri/Map",
      "esri/views/MapView",
      "dojo/on",
      "esri/widgets/Spinner",
      "dojo/dom-construct",
      "dojo/domReady!"], function(Map, MapView, on, Spinner, domConstruct) {
      map = new Map({
        basemap: "streets",
        center: [ -56.049, 38.485 ],
        zoom: 3
      });
      view = new MapView({
        container: "mapDiv",
        map: map
      });
      
      spinner = new Spinner({
        visible: true,
        view: view
      });
      spinner.startup();
      
      domConstruct.place(spinner.domNode, view.root)
      
      on(view, "click", function(evt){
        spinner.set("point", evt.mapPoint);
        
        if(spinTimer){
          clearTimeout(spinTimer); 
        }
        
        spinTimer = setTimeout(function(){
          spinner.set("point", null);
        }, 3000)
        
      });
      
      
    });
  </script>
</head>
<body class="claro">

  <div id="mapDiv" style="width: 900px; height: 600px; border: 1px solid #000;"></div>

</body>
</html>
