<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
  <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no"/>
  <title>API 4.0</title>
  <!--<link rel="stylesheet" href="../esri/css/esri.css">-->
  <link rel="stylesheet" href="//jsdev.arcgis.com/4.0beta1/esri/css/esri.css">
  <style type="text/css">
    html, body {
      height: 100%; width: 100%;
      margin: 0; padding: 0;
    }
    #mapDiv{
      height: 100%;
      width: 100%;
    }
  </style>

  <script src="//jsdev.arcgis.com/4.0beta1/"></script>

  <script>
    require([
      "esri/Map",
      "esri/views/MapView",
      "esri/layers/VectorTiledLayer",
      "dojo/domReady!"
    ], function(
      Map,
      MapView,
      VectorTiledLayer
    ){
      function getParameter(paramName) {
        var searchString = window.location.search.substring(1),
            i, val, params = searchString.split("&");

        for (i=0;i<params.length;i++) {
          val = params[i].split("=");
          if (val[0] == paramName) {
            return val[1];
          }
        }
        return null;
      }

      //url to service
      var serviceUrl = getParameter("url") || "http://tilesdevext.arcgis.com/tiles/e2ea3c31dd80478689ce70c4fb3380c5/arcgis/rest/services/Streets/VectorTileServer";

      map = new Map({
        layers: [
          new VectorTiledLayer(serviceUrl)
        ]
      });

      //make map view and bind it to the map
      var mapView = new MapView({
        container: "mapDiv",
        map: map,
        center: [-100, 40],
        zoom: 4
      });

    });
  </script>
</head>
<body>
  <div id="mapDiv"></div>
</body>
</html>
