<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>Load a basic web scene - 4.3</title>
  <link rel="stylesheet" href="https://js.arcgis.com/4.3/esri/css/main.css">
  <script src="https://js.arcgis.com/4.3/"></script>
  <script>
  require([
    "esri/views/SceneView",
    "esri/WebScene",
    "esri/widgets/Legend",
    "esri/widgets/Expand",
    "dojo/dom",
    "dojo/domReady!"
  ], function(
    SceneView, WebScene, Legend, Expand, dom
  ) {

    var titleDiv = dom.byId("titleDiv");

    /************************************************************
     * Creates a new WebScene instance. A WebScene must reference
     * a PortalItem ID that represents a WebScene saved to
     * arcgis.com or an on-premise portal.
     *
     * To load a WebScene from an on-premise portal, set the portal
     * url in esriConfig.portalUrl.
     ************************************************************/
    var scene = new WebScene({
      portalItem: { // autocasts as new PortalItem()
        // id: "3a9976baef9240ab8645ee25c7e9c096"
        id: "02c56dc9eea142cbbaf167d8974fa91c"
      }
    });

    /************************************************************
     * Set the WebScene instance to the map property in a SceneView.
     ************************************************************/
    var view = new SceneView({
      map: scene,
      container: "viewDiv",
      // padding: {
      //   top: 40
      // }
    });

    view.then(function() {
      // get the first layer in the collection of operational layers in the WebMap
      // when the resources in the MapView have loaded.
      var featureLayer = scene.layers.getItemAt(1);

      var legend = new Legend({
        view: view,
        layerInfos: [{
          layer: featureLayer/*,
          title: "Legend"*/
        }]
      });

      // Finalize the creation of the legend widget.
      legend.startup();

      expand = new Expand({
        expandIconClass: "esri-icon-menu",
        expandTooltip: "Expand Legend",
        expanded: false,
        view: view,
        content: legend.domNode
      });
      view.ui.add(expand, 'bottom-right');

      // var popupTemplate = {
      //   title: "{Name}",
      //   content: "Wewt!"
      // };

      // featureLayer.popupTemplate = popupTemplate;
    });
  });
  </script>
  <style>
  html,
  body,
  #viewDiv {
    padding: 0;
    margin: 0;
    height: 100%;
    width: 100%;
  }
  </style>
</head>

<body>
  <div id="viewDiv">
  </div>
</body>

</html>
